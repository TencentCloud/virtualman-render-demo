self.onmessage=async e=>{const{cmd:cmd,value:value}=e.data;if(cmd==="init"){importScripts(value.js);await wasm_bindgen(value.wasm);self.postMessage({cmd:"init",value:true})}else if(cmd==="unzip"){const result=await fetch(value).then((d=>d.arrayBuffer())).then((d=>new Uint8Array(d))).catch((e=>Promise.resolve(null)));try{if(result){const unzipData=wasm_bindgen.unzip(result);return self.postMessage({cmd:"unzip",value:unzipData})}self.postMessage({cmd:"unzip",value:null})}catch(e){console.error("unzip error:",e,value);self.postMessage({cmd:"unzip",value:null})}}};